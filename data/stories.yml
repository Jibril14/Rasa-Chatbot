version: "3.1"

stories:

- story: happy path
  steps:
  - intent: greet
  - action: utter_greet
  - intent: mood_great
  - action: utter_happy

- story: sad path 1
  steps:
  - intent: greet
  - action: utter_greet
  - intent: mood_unhappy
  - action: utter_cheer_up
  - action: utter_did_that_help
  - intent: affirm
  - action: utter_happy

- story: sad path 2
  steps:
  - intent: greet
  - action: utter_greet
  - intent: mood_unhappy
  - action: utter_cheer_up
  - action: utter_did_that_help
  - intent: deny
  - action: utter_goodbye

- story: anything thanks
  steps:
  - intent: thanks # never imported this but still able to call it here
  - action: utter_thanks

- story: order phone
  steps:
  - intent: order_iphone
  # remove this, since we now have a custom action(we now not calling static response from domain.yml file. rather from action file)
  # - action: utter_order_iphone
  - action: action_extract_iphone_entity # this is from the name method of action file. return: You have selected iphone variant.
  - intent: order_samsung
  - action: action_extract_samsung_entity

# Stories related to buying a laptop
- story: buy_laptop_interaction_user_stop_form_or_unhappy_path_bot_challenge
  steps:
  - intent: greet
  - action: utter_greet
  - intent: buy_laptop
  - action: first_laptop_form
  - active_loop: first_laptop_form
  - slot_was_set: 
    - requested_slot: laptop_os
  - intent: bot_challenge
  - action: utter_iamabot
  - action: first_laptop_form
  - slot_was_set: 
    - requested_slot: laptop_os
  - intent : stop   # this intent was detected 
  - action: utter_ask_continue # but this action was not triggered, kept trigering the "action_default_fallback" instead
  - intent: affirm # this intent was detected 
  - action: action_deactivate_loop # also did not deactivate loop, slot was still presnt
  - active_loop: null
  - slot_was_set: 
    - requested_slot: null
  - intent: goodbye
  - action: utter_goodbye

- story: buy_laptop_user_interrupts_form
  steps:
  - intent: greet
  - action: utter_greet
  - intent: buy_laptop
  - action: first_laptop_form
  - active_loop: first_laptop_form
  - intent: stop
  - action: utter_ask_continue
  - or:
    - intent: stop
    - intent: affirm
  - action: action_deactivate_loop
  - active_loop: null

- story: buy_laptop_interaction_user_stop_form_affirm_we_close_form_user_trigger_form_again_we_open_form
  steps:
  - intent: greet
  - action: utter_greet
  - intent: buy_laptop
  - action: first_laptop_form
  - active_loop: first_laptop_form
  - slot_was_set: 
    - requested_slot: laptop_os
  - intent : stop
  - action: utter_ask_continue
  - intent: affirm
  - action: action_deactivate_loop
  - active_loop: null
  - slot_was_set: 
    - requested_slot: null
  # a long convo below, ie one intent and user folow up with form
  - intent: buy_laptop
  - action: first_laptop_form
  - active_loop: first_laptop_form
  - slot_was_set: 
    - requested_slot: laptop_os
  - slot_was_set: 
    - laptop_os: windows
  - slot_was_set: 
    - laptop_os: windows
  - slot_was_set: 
    - requested_slot: laptop_brand
  - slot_was_set: 
    - laptop_brand: apple
  - slot_was_set: 
    - laptop_brand: hp
  - slot_was_set: 
    - requested_slot: laptop_processor
  - slot_was_set: 
    - laptop_processor: intel core i7
  - slot_was_set: 
    - laptop_processor: intel core i7
  - slot_was_set: 
    - requested_slot: null
  - active_loop: null
  - action: utter_action_submit
  - action: utter_laptop_slots
  

# The 3 Laptop_stories above demonstrate how rasa form can be use with the stories.yml file
# Unlike. before we initiate conversational flow in rasa project involving form with rules.yml file
# rules does well with rasa form, however specify a little hardcorded path for convrsation flow
# this become unflexible expecialy when our conversation include unhappy path